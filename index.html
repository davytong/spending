<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>üí∏ Salary Tracker</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />

<style>
body {
  font-family:"Poppins","KhmerOS",sans-serif;
  background:#f4f7fb;
  padding:20px;
}
h1 { text-align:center; color:#0d6efd; font-weight:600; }

.card { border-radius:16px; }
.expense {
  display:flex;
  justify-content:space-between;
  background:#f8f9fa;
  padding:6px 10px;
  border-radius:8px;
  margin-bottom:4px;
  font-size:14px;
}
.progress { height:14px; border-radius:20px; }

/* FOOD STATUS */
.food-safe { border:2px solid #28a745; background:#e8f5e9; }
.food-warning { border:2px solid #ffc107; background:#fff8e1; }
.food-danger { border:2px solid #dc3545; background:#ffe6e6; }

.reminder {
  padding:10px;
  border-radius:10px;
  margin-top:10px;
  font-weight:600;
}

.safe { background:#e8f5e9; color:#1b5e20; }
.warn { background:#fff8e1; color:#856404; }
.danger { background:#ffe6e6; color:#721c24; }

.btn-small { font-size:0.8rem; padding:2px 6px; }
</style>
</head>

<body>

<h1>üí∏ Salary Tracker</h1>

<div class="container">

<div class="row">
<div class="col-md-6">

<div class="card p-3 food" id="foodCard">
<h5>üçú Food ($60)</h5>

<div id="foodList"></div>

<div class="mt-2 fw-bold">
Spent: $<span id="spent">0</span> |
Remaining: $<span id="remain">0</span> |
Must remain: $<span id="mustRemain">0</span>
</div>

<div class="progress mt-2">
  <div id="foodBar" class="progress-bar"></div>
</div>

<div id="dailyReminder" class="reminder"></div>

<button class="btn btn-primary w-100 mt-2" onclick="addFood()">‚ûï Add Expense</button>

</div>

</div>
</div>

</div>

<script>
/* ===== CONFIG ===== */
const FOOD_BUDGET = 60;
const MAX_DAILY = 4;
const STORAGE_KEY = "food-expenses";

/* ===== LOAD ===== */
let food = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];

/* ===== DATE ===== */
const today = new Date();
const todayDay = today.getDate();
const endDay = todayDay <= 15 ? 15 :
  new Date(today.getFullYear(), today.getMonth()+1, 0).getDate();

const daysLeft = Math.max(endDay - todayDay + 1, 0);
const mustRemain = daysLeft * MAX_DAILY;

/* ===== CALC ===== */
function calc() {
  const spent = food.reduce((s,e)=>s+e.cost,0);
  const remain = FOOD_BUDGET - spent;
  const ratio = remain / mustRemain;

  spentEl.textContent = spent.toFixed(2);
  remainEl.textContent = remain.toFixed(2);
  mustRemainEl.textContent = mustRemain.toFixed(2);

  foodCard.classList.remove("food-safe","food-warning","food-danger");
  foodBar.style.width = Math.min(ratio*100,100)+"%";

  if (ratio >= 1) {
    foodCard.classList.add("food-safe");
    foodBar.style.background="#28a745";
    reminder("‚úÖ Safe spending today", "safe");
  }
  else if (ratio >= 0.7) {
    foodCard.classList.add("food-warning");
    foodBar.style.background="#ffc107";
    reminder("‚ö† You are close to the limit today", "warn");
  }
  else {
    foodCard.classList.add("food-danger");
    foodBar.style.background="#dc3545";
    reminder("üö® Warning: spending too fast today!", "danger");
  }

  renderList();
}

/* ===== UI ===== */
function reminder(msg, cls) {
  dailyReminder.className = "reminder " + cls;
  dailyReminder.textContent =
    `üìÖ ${daysLeft} days left ‚Äî ${msg}`;
}

function renderList() {
  foodList.innerHTML="";
  food
    .sort((a,b)=>new Date(a.date)-new Date(b.date))
    .forEach((e,i)=>{
      foodList.innerHTML+=`
        <div class="expense">
          ${e.date} | ${e.name} $${e.cost.toFixed(2)}
          <button class="btn btn-sm btn-light btn-small"
            onclick="removeFood(${i})">‚úñ</button>
        </div>`;
    });
}

/* ===== ACTIONS ===== */
function addFood() {
  const name = prompt("Item name:");
  const cost = +prompt("Cost:");
  if(!name || !cost) return;
  food.push({
    name,
    cost,
    date:new Date().toISOString().slice(0,10)
  });
  save();
}

function removeFood(i) {
  food.splice(i,1);
  save();
}

function save() {
  localStorage.setItem(STORAGE_KEY, JSON.stringify(food));
  calc();
}

/* ===== INIT ===== */
const spentEl = document.getElementById("spent");
const remainEl = document.getElementById("remain");
const mustRemainEl = document.getElementById("mustRemain");
const foodCard = document.getElementById("foodCard");
const foodBar = document.getElementById("foodBar");
const dailyReminder = document.getElementById("dailyReminder");
const foodList = document.getElementById("foodList");

calc();
</script>

</body>
</html>